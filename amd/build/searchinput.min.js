define("local_wb_faq/searchinput",["exports","core/templates","core/str","local_wb_faq/faqnavbar"],(function(_exports,_templates,_str,_faqnavbar){var obj;
/*
   * @package    local_wunderbyte_table
   * @copyright  Wunderbyte GmbH <info@wunderbyte.at>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.searchJSON=_exports.searchInput=_exports.render=_exports.init=void 0,_templates=(obj=_templates)&&obj.__esModule?obj:{default:obj};var searcharray=[];_exports.searchInput=(inputClass,elementToHide,elementToSearch)=>{let input,filter,li,a,i,txtValue;for(input=document.querySelector(inputClass),filter=normalizeString(input.value.toUpperCase()),li=document.querySelectorAll(elementToHide),i=0;i<li.length;i++)a=li[i].querySelector(elementToSearch),txtValue=normalizeString(a.textContent||a.innerText),txtValue.toUpperCase().indexOf(filter)>-1?li[i].style.display="":li[i].style.display="none"};const normalizeString=str=>str.normalize("NFD").replace(/ä/g,"ae").replace(/Ä/g,"Ae").replace(/ö/g,"oe").replace(/Ö/g,"Oe").replace(/ü/g,"ue").replace(/Ü/g,"Ue").replace(/ß/g,"ss").toUpperCase(),searchJSON=(listContainer,inputClass,json)=>{let arr=[],container=document.querySelector(listContainer),searchVal=normalizeString(document.querySelector(inputClass).value);if("string"==typeof json&&(json=JSON.parse(json)),searchVal.length>3){let i=0;Object.values(json).forEach((e=>{(e.content&&normalizeString(e.content).indexOf(searchVal)>-1||e.title&&normalizeString(e.title).indexOf(searchVal)>-1)&&(arr[i]=e,0==e.type&&(arr[i].iscategory=!0),i++)}));(arr.length!==searcharray.length||arr.some(((item,idx)=>{var _searcharray$idx;return item.id!==(null===(_searcharray$idx=searcharray[idx])||void 0===_searcharray$idx?void 0:_searcharray$idx.id)})))&&render(arr,container),(searcharray=arr).length<1?((0,_str.get_string)("noresult","local_wb_faq").then((value=>{container.innerHTML=value})).catch((e=>{console.log(e)})),(0,_faqnavbar.increaseCounter)()):(0,_faqnavbar.increaseCounter)(!0)}else 0==searchVal.length?(container.innerHTML="",searcharray=[]):((0,_str.get_string)("stringtooshort","local_wb_faq").then((value=>{container.innerHTML=value})).catch((e=>{console.log(e)})),searcharray=[])};_exports.searchJSON=searchJSON;_exports.init=function(searchInputID,listContainer,elementToHide,elementToSearch){let json=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const searchInputElement=document.querySelector(searchInputID);searchInputElement&&searchInputElement.addEventListener("keyup",(function(){searchJSON(listContainer,searchInputID,json)}))};const render=(data,container)=>{_templates.default.renderForPromise("local_wb_faq/searchbox",{items:data}).then((_ref=>{let{html:html}=_ref;container.innerHTML="",container.insertAdjacentHTML("afterbegin",html)})).catch((e=>{console.log(e)}))};_exports.render=render}));

//# sourceMappingURL=searchinput.min.js.map